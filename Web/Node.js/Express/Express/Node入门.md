# Node/Express 入门

## 参考 摘抄

传统Web服务器中(比如`Apache`), 每个HTTP请求都会让服务器创建一个新的进程来处理这个请求

通过Ajax, 我们不需要一次请求整个页面, 而是请求我们需要的部分页面信息, 因此, 我们需要和服务器保持一个长久的有效连接(通常使用长轮询(long polling))

HTTP请求通常不会持续, 每次请求-响应后都会断开连接; 长轮询是一种利用HTTP模拟持续连接的技巧(浏览器主动发送请求至服务器, 等待服务器需要发送信息时, 再返回响应; 可以让浏览器始终保持等待响应的状态);

在传统服务器上, 每次新的用户连接到网站上时, 就需要一个新的连接, 每个连接都占用一个进程(大部分时间是空闲的), 过多的进程会占用过多内存, 可能导致服务器耗光内存

解决方法: 非阻塞和事件驱动

非阻塞像是一个loop循环, 会一直运行; 当有新的请求时, 就会将这个请求传给具体的请求处理程序, 然后响应一个回调. 然后继续运行, 请求处理程序执行完毕后, 就将响应返回浏览器, 然后继续运行. 这样, 服务器进程就不会等待

服务器只有在用户有事件发生时才会响应(事件驱动)

Node.js由JS编写, 使用`Google`的`V8`虚拟机(Chrome浏览器使用的JavaScript执行环境), 来解释和执行`JavaScript`代码. 因为JS本身就是事件驱动的脚本语言(事件处理, 回调).

相对于浏览器环境, Node.js事实上就是另外一种上下文, 允许在后端(脱离浏览器环境)运行JavaScript代码

事件驱动编程