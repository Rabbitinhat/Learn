<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <input type="text" tabindex=1><a href=".">(help)</a>
    <button onclick="console.log('ok')" tabindex=2>OK</button>

    <form action="example/submit.html">
    Name: <input type="text" name="name"><br/>
    PassWord: <input type="password" name="password"><br/>
    <button type="submit">Log in</button>
    </form>

    <textarea>dadadadadadada</textarea>
    <input type="text" class="count"/>length: <span id="length">0</span>
    <input type="file" >
    <input type="file" multiple class="filereader">
    <script>
    document.querySelector("input").focus();
    console.log(document.activeElement.tagName);
    document.querySelector("input").blur();
    console.log(document.activeElement.tagName);

    let form = document.querySelector("form");
    console.log(form.elements[1].type);
    //通过name属性值访问
    console.log(form.elements.password.type);
    console.log(form.elements.name.form == form);

    //selectionStart selectionEnd
    let textarea = document.querySelector("textarea");
    textarea.focus();
    textarea.addEventListener("keydown", event=>{
        //the key code for F2 happens to be 113
        console.log(textarea.selectionStart);
    console.log(textarea.selectionEnd);
        if(event.keyCode == 113){
            replaceSelection(textarea, "Khasekhemwy");
            event.preventDefault();
        }
    });
    function replaceSelection(field, word){
        let from = field.selectionStart, to = field.selectionEnd;
        console.log(field.value);
        console.log(from);
        console.log(to);
        console.log(field.value.slice(0, from));
        field.value = field.value.slice(0, from) + word + field.value.slice(to);
//        console.log(field.value);
        field.selectionStart = from + word.length;
        field.selectionEnd = from + word.length;
    }

    //显示文本字段长度
    let text = document.querySelector("input.count");
    let output = document.querySelector("#length");
    text.addEventListener("input", ()=>{
        output.textContent = text.value.length;
    });

    //文件上传
    let input = document.querySelector("input");
    input.addEventListener("change", ()=>{
        if(input.files.length > 0){
            let file = input.files[0];
            console.log("You chose", file.name);
            if(file.type) console.log("It has type", file.type);
        }
    });

    //fileReader Object
    let input2 = document.querySelector("input.filereader");
    input2.addEventListener("change", ()=>{
        for(let file of Array.from(input2.files)){
            let reader = new FileReader();
            reader.addEventListener("load", ()=>{
                console.log("File", file.name, "starts with", reader.result.slice(0, 100));
            });
            reader.readAsText(file);
        }
    });
    </script>
</body>
</html>